<div id="sf-products-container" flex layout="row" layout-wrap layout-padding>
    <div class="sf-product" flex-xs="100" flex-sm="33" flex-md="25" flex="20" ng-repeat="product in ::vm.products track by product.id" layout-padding>
      <md-card>
        <!-- Tablet & Desktop -->
        <div hide-xs>
          <md-card-title-text layout="column">
            <span class="md-subhead ">{{::product.brand}}</span>
            <span class="md-title">{{::product.name}}</span>
          </md-card-title-text>
          <md-card-title-media class="sf-image-wrapper" layout="row" layout-padding>
            <img ng-click="vm.openQuickview(product)" ui-sref-opts="{reload: false, notify: false}" ng-src="{{::product.mediumImage}}" />
          </md-card-title-media>
          <div layout="column"  class="sf-price md-title">{{::product.price}} $</div>
          <md-card-actions layout="row " layout-align="end center ">
            <button recompile-on="cart:add:{{::product.id}}" flex class="md-raised md-button md-ink-ripple" ng-click="vm.removeFromCart(product)" class="md-raised" aria-label="remove rom cart" ng-disabled="::(vm.getQuantity(vm.currentUser.auth.uid, product.id)<1||vm.isLoading)">-</button>
            <button recompile-on="cart:add:{{::product.id}}" flex class="product-quantity md-raised md-button md-ink-ripple" ng-class="::{highlight:(vm.getQuantity(vm.currentUser.auth.uid, product.id)>0)}" aria-label="quantity" ng-disabled="::(vm.getQuantity(vm.currentUser.auth.uid, product.id)<1)">{{::vm.getQuantity(vm.currentUser.auth.uid, product.id)}}</button>
            <button recompile-on="cart:add:{{::product.id}}" flex class="md-raised md-warn md-button md-ink-ripple" ng-click="vm.addToCart(product)" aria-label="add to cart" class="md-raised md-warn" ng-show="::(vm.getQuantity(vm.currentUser.auth.uid, product.id)<1)">
              <i class="sf-md-cart-icon material-icons">shopping_cart</i>
            </button>
            <button recompile-on="cart:add:{{::product.id}}" flex class="md-raised md- md-button md-ink-ripple" ng-click="vm.addToCart(product, quantity)" aria-label="add to cart" class="md-raised" ng-hide="::(vm.getQuantity(vm.currentUser.auth.uid, product.id)<1)" ng-disabled="::(vm.isLoading)">+</button>
          </md-card-actions>
          <md-list hide-xs class="sf-flatmate-list" ng-show="::vm.users.current.length>1" >
            <md-subheader class="sf-flatmates-headline md-no-sticky">Your flatmates</md-subheader>
            <md-list-item class="sf-flatmate-item noright" ng-if="::flatmate.uid !== vm.currentUser.auth.uid" ng-repeat="flatmate in ::vm.users.current">
              <img ng-src="{{::flatmate.photoURL}}" class="md-avatar" />
              <p class="sf-flatmate-name">{{::flatmate.displayName}}</p>
              <md-button class="md-secondary md-icon-button" disabled>
                <div recompile-on="cart:add:{{::product.id}}">
                  <span class="sf-flatmate-quantity" ng-show="::vm.cartProducts.current[flatmate.uid][product.id]">{{::vm.cartProducts.current[flatmate.uid][product.id].quantity}}</span>
                  <span class="sf-flatmate-quantity" ng-hide="::vm.cartProducts.current[flatmate.uid][product.id]">0</span>
                </div>
              </md-button>
            </md-list-item>
          </md-list>
        </div>
        <!-- Mobile -->
        <div hide-sm hide-md hide-lg>
          <div layout="row" layout-padding>
            <md-card-title-media ng-click="vm.openQuickview(product)" class="sf-image-wrapper" flex="33">
              <img ui-sref-opts="{reload: false, notify: false}" ng-src="{{::product.mediumImage}}" />
            </md-card-title-media>
            <md-card-title-text flex="66" layout="column">
              <div ng-click="vm.openQuickview(product)">
                <!-- Title -->
                <span class="md-subhead ">{{::product.brand}}</span>
                <span class="md-title">{{::product.name}}</span>

                <!-- Description -->
                <div class="sf-description">
                  <div class="sf-price md-title">{{::product.price}} $</div>
                </div>
              </div>
              <!-- Actions -->
              <md-card-actions layout="row " layout-align="end center ">
                <button recompile-on="cart:add:{{::product.id}}" flex class="md-raised md-button md-ink-ripple" ng-click="vm.removeFromCart(product)" class="md-raised" aria-label="remove rom cart" ng-disabled="::(vm.getQuantity(vm.currentUser.auth.uid, product.id)<1||vm.isLoading)">-</button>
                <button recompile-on="cart:add:{{::product.id}}" flex class="product-quantity md-raised md-button md-ink-ripple" ng-class="::{highlight:(vm.getQuantity(vm.currentUser.auth.uid, product.id)>0)}" aria-label="quantity" ng-disabled="::(vm.getQuantity(vm.currentUser.auth.uid, product.id)<1)">{{::vm.getQuantity(vm.currentUser.auth.uid, product.id)}}</button>
                <button recompile-on="cart:add:{{::product.id}}" flex class="md-raised md-warn md-button md-ink-ripple" ng-click="vm.addToCart(product)" aria-label="add to cart" class="md-raised md-warn" ng-show="::(vm.getQuantity(vm.currentUser.auth.uid, product.id)<1)">
                  <i class="sf-md-cart-icon material-icons">shopping_cart</i>
                </button>
                <button recompile-on="cart:add:{{::product.id}}" flex class="md-raised md- md-button md-ink-ripple" ng-click="vm.addToCart(product, quantity)" aria-label="add to cart" class="md-raised" ng-hide="::(vm.getQuantity(vm.currentUser.auth.uid, product.id)<1)" ng-disabled="::(vm.isLoading)">+</button>
              </md-card-actions>
            </md-card-title-text>
          </div>
        </div>
      </md-card>
    </div>
    <div ng-hide="vm.products.length>0" layout="row" layout-fill layout-align="center center">
        <svg flex width='102px' height='102px' xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" preserveAspectRatio="xMidYMid" class="uil-default"><rect x="0" y="0" width="100" height="100" fill="none" class="bk"></rect><rect  x='46.5' y='40' width='7' height='20' rx='5' ry='5' fill='#1a75cf' transform='rotate(0 50 50) translate(0 -30)'>  <animate attributeName='opacity' from='1' to='0' dur='1s' begin='0s' repeatCount='indefinite'/></rect><rect  x='46.5' y='40' width='7' height='20' rx='5' ry='5' fill='#1a75cf' transform='rotate(30 50 50) translate(0 -30)'>  <animate attributeName='opacity' from='1' to='0' dur='1s' begin='0.08333333333333333s' repeatCount='indefinite'/></rect><rect  x='46.5' y='40' width='7' height='20' rx='5' ry='5' fill='#1a75cf' transform='rotate(60 50 50) translate(0 -30)'>  <animate attributeName='opacity' from='1' to='0' dur='1s' begin='0.16666666666666666s' repeatCount='indefinite'/></rect><rect  x='46.5' y='40' width='7' height='20' rx='5' ry='5' fill='#1a75cf' transform='rotate(90 50 50) translate(0 -30)'>  <animate attributeName='opacity' from='1' to='0' dur='1s' begin='0.25s' repeatCount='indefinite'/></rect><rect  x='46.5' y='40' width='7' height='20' rx='5' ry='5' fill='#1a75cf' transform='rotate(120 50 50) translate(0 -30)'>  <animate attributeName='opacity' from='1' to='0' dur='1s' begin='0.3333333333333333s' repeatCount='indefinite'/></rect><rect  x='46.5' y='40' width='7' height='20' rx='5' ry='5' fill='#1a75cf' transform='rotate(150 50 50) translate(0 -30)'>  <animate attributeName='opacity' from='1' to='0' dur='1s' begin='0.4166666666666667s' repeatCount='indefinite'/></rect><rect  x='46.5' y='40' width='7' height='20' rx='5' ry='5' fill='#1a75cf' transform='rotate(180 50 50) translate(0 -30)'>  <animate attributeName='opacity' from='1' to='0' dur='1s' begin='0.5s' repeatCount='indefinite'/></rect><rect  x='46.5' y='40' width='7' height='20' rx='5' ry='5' fill='#1a75cf' transform='rotate(210 50 50) translate(0 -30)'>  <animate attributeName='opacity' from='1' to='0' dur='1s' begin='0.5833333333333334s' repeatCount='indefinite'/></rect><rect  x='46.5' y='40' width='7' height='20' rx='5' ry='5' fill='#1a75cf' transform='rotate(240 50 50) translate(0 -30)'>  <animate attributeName='opacity' from='1' to='0' dur='1s' begin='0.6666666666666666s' repeatCount='indefinite'/></rect><rect  x='46.5' y='40' width='7' height='20' rx='5' ry='5' fill='#1a75cf' transform='rotate(270 50 50) translate(0 -30)'>  <animate attributeName='opacity' from='1' to='0' dur='1s' begin='0.75s' repeatCount='indefinite'/></rect><rect  x='46.5' y='40' width='7' height='20' rx='5' ry='5' fill='#1a75cf' transform='rotate(300 50 50) translate(0 -30)'>  <animate attributeName='opacity' from='1' to='0' dur='1s' begin='0.8333333333333334s' repeatCount='indefinite'/></rect><rect  x='46.5' y='40' width='7' height='20' rx='5' ry='5' fill='#1a75cf' transform='rotate(330 50 50) translate(0 -30)'>  <animate attributeName='opacity' from='1' to='0' dur='1s' begin='0.9166666666666666s' repeatCount='indefinite'/></rect></svg>
    </div>
</div>
